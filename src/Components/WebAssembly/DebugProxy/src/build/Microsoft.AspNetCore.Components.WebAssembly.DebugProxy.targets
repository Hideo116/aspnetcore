<Project>

  <PropertyGroup>
    <GetCopyToOutputDirectoryItemsDependsOn>
      $(GetCopyToOutputDirectoryItemsDependsOn);
      _GenerateDebugProxyCopyToOutputDirectoryItems;
    </GetCopyToOutputDirectoryItemsDependsOn>

    <_DebugProxyBinariesDirectory>$([MSBuild]::NormalizeDirectory('$(MSBuildThisFileDirectory)..\tools\'))</_DebugProxyBinariesDirectory>
  </PropertyGroup>

  <Target Name="_GenerateDebugProxyCopyToOutputDirectoryItems">
    <ItemGroup>
      <_DebugProxyBinaries Include="$(_DebugProxyBinariesDirectory)**" />
      <ContentWithTargetPath
        Include="@(_DebugProxyBinaries)">
        <TargetPath>BlazorDebugProxy\%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </ContentWithTargetPath>
    </ItemGroup>
  </Target>

</Project>
